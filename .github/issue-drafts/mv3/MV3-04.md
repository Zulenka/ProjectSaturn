Parent: #1934

## Summary

Refactor background runtime so core behavior is service-worker compatible.

## Checklist

- [ ] Isolate or replace DOM-dependent background utilities.
- [ ] Introduce offscreen document helpers only where required.
- [ ] Verify suspend/resume resilience in smoke tests.

## Definition of Done

- No service-worker runtime exceptions from DOM-only APIs.

